<div class="bg-white dark:bg-slate-800 rounded-lg shadow-sm p-4">
  <div class="flex justify-between items-center mb-4">
    <h2 class="text-lg font-medium">Weekly Schedule</h2>

    <button
      class="px-3 py-1 text-sm rounded-md bg-indigo-600 text-white hover:bg-indigo-500"
      (click)="createSchedule()">
      Create Schedule
    </button>
  </div>

  @if (loading()) {
    <div class="grid grid-cols-7 gap-3 animate-pulse">
      @for (i of [1,2,3,4,5,6,7]; track i) {
        <div class="h-40 bg-slate-200 dark:bg-slate-700 rounded"></div>
      }
    </div>
  } @else {
    <div class="grid grid-cols-7 gap-3">
      @for (day of days; track day) {
        <div class="bg-slate-50 dark:bg-slate-700 rounded-md p-2">
          <h3 class="text-xs font-semibold text-center mb-2">{{ day }}</h3>

          @for (slot of grouped()[day]; track slot.id) {
            <div
              class="mb-2 px-2 py-1 rounded-md text-sm bg-white dark:bg-slate-800 border-l-4">

              <div class="font-medium">{{ slot.habitName }}</div>
              <div class="text-xs text-slate-500">{{ slot.startTime }}</div>

              <button
                class="text-xs text-red-500 hover:underline mt-1"
                (click)="miss(slot.id)">
                Miss
              </button>
            </div>
          }
        </div>
      }
    </div>
  }
</div>
